{
  "consumer": {
    "name": "Pact Broker Client Ffi"
  },
  "interactions": [
    {
      "description": "a request for the index resource",
      "pending": false,
      "request": {
        "headers": {
          "Accept": [
            "application/hal+json"
          ]
        },
        "method": "GET",
        "path": "/"
      },
      "response": {
        "body": {
          "content": {
            "_links": {
              "pb:pacticipant": {
                "href": "http://127.0.0.1:9998/HAL-REL-PLACEHOLDER-PB-PACTICIPANT-{pacticipant}"
              },
              "pb:pacticipants": {
                "href": "http://127.0.0.1:9998/HAL-REL-PLACEHOLDER-PB-PACTICIPANTS"
              },
              "pb:webhooks": {
                "href": "http://127.0.0.1:9998/HAL-REL-PLACEHOLDER-PB-WEBHOOKS"
              }
            }
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/hal+json;charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$._links['pb:pacticipant'].href": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "(?-mix:http:\\/\\/.*{pacticipant})"
                }
              ]
            },
            "$._links['pb:pacticipants'].href": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "(?-mix:http:\\/\\/.*)"
                }
              ]
            },
            "$._links['pb:webhooks'].href": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "(?-mix:http:\\/\\/.*)"
                }
              ]
            }
          },
          "header": {}
        },
        "status": 200
      },
      "transport": "http",
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request for the index resource",
      "pending": false,
      "providerStates": [
        {
          "name": "the pb:publish-provider-contract relation exists in the index resource"
        }
      ],
      "request": {
        "headers": {
          "Accept": [
            "application/hal+json"
          ]
        },
        "method": "GET",
        "path": "/"
      },
      "response": {
        "body": {
          "content": {
            "_links": {
              "pf:publish-provider-contract": {
                "href": "http://127.0.0.1:9998/HAL-REL-PLACEHOLDER-PF-PUBLISH-PROVIDER-CONTRACT-{provider}"
              }
            }
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/hal+json;charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$._links['pf:publish-provider-contract'].href": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "(?-mix:http:\\/\\/.*{provider})"
                }
              ]
            }
          },
          "header": {}
        },
        "status": 200
      },
      "transport": "http",
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to create a provider contract",
      "pending": false,
      "request": {
        "body": {
          "content": {
            "content": "LS0tCnNvbWU6IGNvbnRyYWN0Cg==",
            "contentType": "application/yaml",
            "contractType": "oas",
            "verificationResults": {
              "content": "c29tZSByZXN1bHRz",
              "contentType": "text/plain",
              "format": "text",
              "success": true,
              "verifier": "my custom tool",
              "verifierVersion": "1.0"
            }
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Accept": [
            "application/hal+json"
          ],
          "Content-Type": [
            "application/json"
          ]
        },
        "method": "PUT",
        "path": "/contracts/provider/Bar/version/1"
      },
      "response": {
        "headers": {
          "Content-Type": [
            "application/hal+json;charset=utf-8"
          ]
        },
        "status": 201
      },
      "transport": "http",
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to create a provider contract",
      "pending": false,
      "providerStates": [
        {
          "name": "there is a pf:ui href in the response"
        }
      ],
      "request": {
        "body": {
          "content": {
            "content": "LS0tCnNvbWU6IGNvbnRyYWN0Cg==",
            "contentType": "application/yaml",
            "contractType": "oas",
            "verificationResults": {
              "content": "c29tZSByZXN1bHRz",
              "contentType": "text/plain",
              "format": "text",
              "success": true,
              "verifier": "my custom tool",
              "verifierVersion": "1.0"
            }
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Accept": [
            "application/hal+json"
          ],
          "Content-Type": [
            "application/json"
          ]
        },
        "method": "PUT",
        "path": "/contracts/provider/Bar/version/1"
      },
      "response": {
        "body": {
          "content": {
            "_links": {
              "pf:ui": {
                "href": "some-url"
              }
            }
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/hal+json;charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$._links['pf:ui'].href": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {}
        },
        "status": 201
      },
      "transport": "http",
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to create a webhook for a team",
      "pending": false,
      "providerStates": [
        {
          "name": "a team with UUID 2abbc12a-427d-432a-a521-c870af1739d9 exists"
        }
      ],
      "request": {
        "body": {
          "content": {
            "description": "a webhook",
            "events": [
              {
                "name": "contract_content_changed"
              }
            ],
            "request": {
              "body": {
                "some": "body"
              },
              "headers": {
                "Bar": "foo",
                "Foo": "bar"
              },
              "method": "POST",
              "url": "https://webhook"
            },
            "teamUuid": "2abbc12a-427d-432a-a521-c870af1739d9"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Accept": [
            "application/hal+json"
          ],
          "Content-Type": [
            "application/json"
          ]
        },
        "method": "POST",
        "path": "/HAL-REL-PLACEHOLDER-PB-WEBHOOKS"
      },
      "response": {
        "body": {
          "content": {
            "_links": {
              "self": {
                "href": "http://localhost:1234/some-url",
                "title": "A title"
              }
            },
            "description": "a webhook",
            "teamUuid": "2abbc12a-427d-432a-a521-c870af1739d9"
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/hal+json;charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$._links.self.href": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "regex",
                  "regex": "(?-mix:http:\\/\\/.*)"
                }
              ]
            },
            "$._links.self.title": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            },
            "$.description": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type"
                }
              ]
            }
          },
          "header": {}
        },
        "status": 201
      },
      "transport": "http",
      "type": "Synchronous/HTTP"
    },
    {
      "description": "a request to publish a provider contract",
      "pending": false,
      "request": {
        "body": {
          "content": {
            "branch": "main",
            "buildUrl": "http://build",
            "contract": {
              "content": "LS0tCnNvbWU6IGNvbnRyYWN0Cg==",
              "contentType": "application/yaml",
              "selfVerificationResults": {
                "content": "c29tZSByZXN1bHRz",
                "contentType": "text/plain",
                "format": "text",
                "success": true,
                "verifier": "my custom tool",
                "verifierVersion": "1.0"
              },
              "specification": "oas"
            },
            "pacticipantVersionNumber": "1",
            "tags": [
              "dev"
            ]
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Accept": [
            "application/hal+json",
            "application/problem+json"
          ],
          "Content-Type": [
            "application/json"
          ]
        },
        "method": "POST",
        "path": "/HAL-REL-PLACEHOLDER-PF-PUBLISH-PROVIDER-CONTRACT-Bar"
      },
      "response": {
        "body": {
          "content": {
            "_embedded": {
              "version": {
                "number": "1"
              }
            },
            "_links": {
              "pb:branch-version": {},
              "pb:pacticipant-version-tags": [
                {}
              ]
            },
            "notices": [
              {
                "text": "some notice",
                "type": "info"
              }
            ]
          },
          "contentType": "application/json",
          "encoded": false
        },
        "headers": {
          "Content-Type": [
            "application/hal+json;charset=utf-8"
          ]
        },
        "matchingRules": {
          "body": {
            "$.notices": {
              "combine": "AND",
              "matchers": [
                {
                  "match": "type",
                  "min": 1
                }
              ]
            }
          },
          "header": {}
        },
        "status": 200
      },
      "transport": "http",
      "type": "Synchronous/HTTP"
    }
  ],
  "metadata": {
    "pactRust": {
      "ffi": "0.4.22",
      "mockserver": "1.2.9",
      "models": "1.2.3"
    },
    "pactSpecification": {
      "version": "4.0"
    },
    "sbmt-pact": {
      "pact-ffi": "0.4.22"
    }
  },
  "provider": {
    "name": "PactFlow"
  }
}